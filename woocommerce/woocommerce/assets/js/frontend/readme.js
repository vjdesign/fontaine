/*
* Readmore.js jQuery plugin
* Author: @jed_foster
* Project home: jedfoster.github.io/Readmore.js
* Licensed under the MIT license
*/
(function(a){var b="readmore",c={speed:100,maxHeight:200,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:true,sectionCSS:"display: block; width: 100%;",startOpen:false,beforeToggle:function(){},afterToggle:function(){}},d=false;function e(f,h){this.element=f;this.options=a.extend({},c,h);a(this.element).data("max-height",this.options.maxHeight);delete (this.options.maxHeight);if(this.options.embedCSS&&!d){var g=".readmore-js-toggle, .readmore-js-section { "+this.options.sectionCSS+" } .readmore-js-section { overflow: hidden; }";(function(i,k){var j=i.createElement("style");j.type="text/css";if(j.styleSheet){j.styleSheet.cssText=k}else{j.appendChild(i.createTextNode(k))}i.getElementsByTagName("head")[0].appendChild(j)}(document,g));d=true}this._defaults=c;this._name=b;this.init()}e.prototype={init:function(){var f=this;a(this.element).each(function(){var g=a(this),h=(g.css("max-height").replace(/[^-\d\.]/g,"")>g.data("max-height"))?g.css("max-height").replace(/[^-\d\.]/g,""):g.data("max-height");g.addClass("readmore-js-section");if(g.css("max-height")!="none"){g.css("max-height","none")}g.data("boxHeight",g.outerHeight(true));if(g.outerHeight(true)<h){return true}else{g.data("sliderHeight",h);var i=f.options.startOpen?f.options.lessLink:f.options.moreLink;g.after(a(i).on("click",function(j){f.toggleSlider(this,g,j)}).addClass("readmore-js-toggle"));if(!f.options.startOpen){g.css({height:h})}}})},toggleSlider:function(i,h,f){f.preventDefault();var j=this,g=newLink="",k=false,l=a(h).data("sliderHeight");if(a(h).height()==l){g=a(h).data().boxHeight+"px";newLink="lessLink";k=true}else{g=l;newLink="moreLink"}j.options.beforeToggle(i,h,k);a(h).animate({height:g},{duration:j.options.speed});a(i).replaceWith(a(j.options[newLink]).on("click",function(m){j.toggleSlider(this,h,m)}).addClass("readmore-js-toggle"));j.options.afterToggle(i,h,k)}};a.fn[b]=function(g){var f=arguments;if(g===undefined||typeof g==="object"){return this.each(function(){if(!a.data(this,"plugin_"+b)){a.data(this,"plugin_"+b,new e(this,g))}})}else{if(typeof g==="string"&&g[0]!=="_"&&g!=="init"){return this.each(function(){var h=a.data(this,"plugin_"+b);if(h instanceof e&&typeof h[g]==="function"){h[g].apply(h,Array.prototype.slice.call(f,1))}})}}}})(jQuery);